(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{351:function(e,t,n){},394:function(e,t,n){"use strict";n.r(t);n(60),n(29);var r=n(5),o=(n(203),n(128)),l={name:"CreateTopic",middleware:"admin",layout:"default",components:{ClientOnly:n.n(o).a},data:function(){return{valid:!1,topicName:"",topicDescription:"",topicThumbnail:null,topicNameRules:[function(e){return""===e?"Topic Name is required.":!(e.length>=20)||"Topic Name must be less than 20 characters."}],topicDescriptionRules:[function(e){return""===e?"Topic Description is required.":!1!==new RegExp("^[A-Z][A-Za-z]*").test(e)||"Topic Description must start with a captial letter."}],topicThumbnailRules:[function(e){return e?!(e.size>=1e6)||"Topic Thumbail must be smaller than 1 MB in size":"Topic Thumbnail is required."}]}},methods:{createTopic:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.topicName.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(""),t.next=4,e.$uploadImageToFirebase(e.topicThumbnail,"/topics/"+n);case 4:if(1!==(r=t.sent).success){t.next=20;break}return t.next=8,r.file.url;case 8:return o=t.sent,t.next=11,e.$createTopicViewModel.createTopic(n,e.topicDescription,o);case 11:if(l=t.sent,console.log(l),!l||!l.data||l.errors){t.next=17;break}return t.abrupt("return",e.$router.push("/"));case 17:throw new Error("Some error occurred while creating topic");case 18:t.next=21;break;case 20:throw new Error("Some error occurred while uploading topic thumbnail image to firebase");case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},clearAllFields:function(){this.topicName="",this.topicDescription="",this.topicThumbnail=null}}},c=n(51),h=n(92),f=n.n(h),d=n(307),m=(n(13),n(11),n(8),n(6),n(10),n(48)),v=(n(28),n(2)),y=n(19),x=(n(40),n(41),n(24),n(351),n(329)),w=x.a,S=n(344),T=n(1),O=n(7);function V(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?V(Object(source),!0).forEach((function(t){Object(v.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):V(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var D=w.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(e){return"boolean"==typeof e||[1e3,1024].includes(e)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(e){return Object(T.x)(e).every((function(e){return null!=e&&"object"===Object(y.a)(e)}))}}},computed:{classes:function(){return j(j({},w.options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var e=this.isMultiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);var t=this.internalArrayValue.reduce((function(e,t){var n=t.size;return e+(void 0===n?0:n)}),0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(T.p)(t,1024===this.base))},internalArrayValue:function(){return Object(T.x)(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},isMultiple:function(){return this.$attrs.hasOwnProperty("multiple")},text:function(){var e=this;return this.isDirty?this.internalArrayValue.map((function(t){var n=t.name,r=void 0===n?"":n,o=t.size,l=void 0===o?0:o,c=e.truncateText(r);return e.showSize?"".concat(c," (").concat(Object(T.p)(l,1024===e.base),")"):c})):[this.placeholder]},base:function(){return"boolean"!=typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(e){!0===e&&Object(O.b)("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(e){var t=this.isMultiple?e:e?[e]:[];Object(T.h)(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.isMultiple?[]:void 0,this.$refs.input.value=""},genChips:function(){var e=this;return this.isDirty?this.text.map((function(text,t){return e.$createElement(S.a,{props:{small:e.smallChips},on:{"click:close":function(){var n=e.internalValue;n.splice(t,1),e.internalValue=n}}},[text])})):[]},genInput:function(){var input=w.options.methods.genInput.call(this);return delete input.data.domProps.value,delete input.data.on.input,input.data.on.change=this.onInput,[this.genSelections(),input]},genPrependSlot:function(){var e=this;if(!this.prependIcon)return null;var t=this.genIcon("prepend",(function(){e.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText:function(){var e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections:function(){var e=this,t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(n,r){e.$scopedSlots.selection&&t.push(e.$scopedSlots.selection({text:e.text[r],file:n,index:r}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot:function(){var e=this,t=w.options.methods.genTextFieldSlot.call(this);return t.data.on=j(j({},t.data.on||{}),{},{click:function(){return e.$refs.input.click()}}),t},onInput:function(e){var t=Object(m.a)(e.target.files||[]);this.internalValue=this.isMultiple?t:t[0],this.initialValue=this.internalValue},onKeyDown:function(e){this.$emit("keydown",e)},truncateText:function(e){if(e.length<Number(this.truncateLength))return e;var t=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(e.slice(0,t),"â€¦").concat(e.slice(e.length-t))}}}),$=n(391),C=n(392),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ma-0 pa-0"},[n("v-form",{ref:"createTopicForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Topic Name",counter:20,rules:e.topicNameRules,required:""},model:{value:e.topicName,callback:function(t){e.topicName=t},expression:"topicName"}}),e._v(" "),n("v-textarea",{attrs:{placeholder:"Topic Description",rows:"6",hint:"Describe the topic in brief.",rules:e.topicDescriptionRules,required:""},model:{value:e.topicDescription,callback:function(t){e.topicDescription=t},expression:"topicDescription"}}),e._v(" "),n("client-only",[n("v-file-input",{staticClass:"mb-2",attrs:{accept:"image/*",placeholder:"Topic Thumbnail",hint:"This will be displayed as the topic logo.",rules:e.topicThumbnailRules,counter:1,"show-size":1e3,required:""},model:{value:e.topicThumbnail,callback:function(t){e.topicThumbnail=t},expression:"topicThumbnail"}})],1),e._v(" "),n("div",{staticClass:"ma-0 pa-0 d-flex flex-row justify-end align-center"},[n("v-btn",{staticClass:"mt-8 mr-2",attrs:{text:""},on:{click:function(t){return e.clearAllFields()}}},[e._v("\n        Clear\n      ")]),e._v(" "),n("v-btn",{staticClass:"mt-8",attrs:{color:"primary",disabled:!e.valid},on:{click:function(t){return e.createTopic()}}},[e._v("\n        Create\n      ")])],1)],1)],1)}),[],!1,null,"58dd5fb8",null);t.default=component.exports;f()(component,{VBtn:d.a,VFileInput:D,VForm:$.a,VTextField:x.a,VTextarea:C.a})}}]);