(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{321:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n(48);var r=n(12),o=n(44);n(339);function c(e,t){return l.apply(this,arguments)}function l(){return(l=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=o.storage().ref("images/"),e.next=4,r.child(n).put(t);case 4:return c=e.sent,e.next=7,c.ref.getDownloadURL();case 7:return l=e.sent,e.abrupt("return",{success:1,file:{url:l}});case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{success:0,file:{url:""}});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}},343:function(e,t,n){},389:function(e,t,n){"use strict";n.r(t);n(58),n(48);var r=n(12),o=(n(200),n(124)),c=n.n(o),l=n(21),h=n(34),f=n(59),d=n.n(f),m=n(136),v=function(){function e(){Object(l.a)(this,e)}var t;return Object(h.a)(e,null,[{key:"createTopic",value:(t=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post(m.graphqlEndpoint,{query:"\n            mutation CreateTopic($topicInputVar: TopicInput!) {\n                createTopic(topicInput: $topicInputVar) {\n                    name\n                }\n            }\n        ",operationName:"CreateTopic",variables:{topicInputVar:{name:t,description:n,thumbnailLink:r}}});case 3:if(!(o=e.sent)||!o.data){e.next=8;break}return e.abrupt("return",o.data);case 8:throw new Error("Some error occurred while following topic");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response.data.errors);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),function(e,n,r){return t.apply(this,arguments)})}]),e}(),y=n(321),w={name:"CreateTopic",middleware:"admin",layout:"default",components:{ClientOnly:c.a},data:function(){return{valid:!1,topicName:"",topicDescription:"",topicThumbnail:null,topicNameRules:[function(e){return""===e?"Topic Name is required.":!(e.length>=20)||"Topic Name must be less than 20 characters."}],topicDescriptionRules:[function(e){return""===e?"Topic Description is required.":!1!==new RegExp("^[A-Z][A-Za-z]*").test(e)||"Topic Description must start with a captial letter."}],topicThumbnailRules:[function(e){return e?!(e.size>=1e6)||"Topic Thumbail must be smaller than 1 MB in size":"Topic Thumbnail is required."}]}},methods:{createTopic:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.topicName.split(" ").map((function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})).join(""),t.next=4,Object(y.a)(e.topicThumbnail,"/topics/"+n);case 4:if(1!==(r=t.sent).success){t.next=20;break}return t.next=8,r.file.url;case 8:return o=t.sent,t.next=11,v.createTopic(n,e.topicDescription,o);case 11:if(c=t.sent,console.log(c),!c||!c.data||c.errors){t.next=17;break}return t.abrupt("return",e.$router.push("/"));case 17:throw new Error("Some error occurred while creating topic");case 18:t.next=21;break;case 20:throw new Error("Some error occurred while uploading topic thumbnail image to firebase");case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),console.log(t.t0);case 26:case"end":return t.stop()}}),t,null,[[0,23]])})))()},clearAllFields:function(){this.topicName="",this.topicDescription="",this.topicThumbnail=null}}},x=n(49),T=n(89),S=n.n(T),O=n(296),j=(n(11),n(10),n(7),n(4),n(9),n(45)),V=(n(26),n(2)),k=n(16),C=(n(37),n(38),n(22),n(343),n(319)),D=C.a,$=n(335),z=n(1),N=n(6);function I(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function R(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(Object(source),!0).forEach((function(t){Object(V.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):I(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var _=D.extend({name:"v-file-input",model:{prop:"value",event:"change"},props:{chips:Boolean,clearable:{type:Boolean,default:!0},counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},placeholder:String,prependIcon:{type:String,default:"$file"},readonly:{type:Boolean,default:!1},showSize:{type:[Boolean,Number],default:!1,validator:function(e){return"boolean"==typeof e||[1e3,1024].includes(e)}},smallChips:Boolean,truncateLength:{type:[Number,String],default:22},type:{type:String,default:"file"},value:{default:void 0,validator:function(e){return Object(z.x)(e).every((function(e){return null!=e&&"object"===Object(k.a)(e)}))}}},computed:{classes:function(){return R(R({},D.options.computed.classes.call(this)),{},{"v-file-input":!0})},computedCounterValue:function(){var e=this.isMultiple&&this.lazyValue?this.lazyValue.length:this.lazyValue instanceof File?1:0;if(!this.showSize)return this.$vuetify.lang.t(this.counterString,e);var t=this.internalArrayValue.reduce((function(e,t){var n=t.size;return e+(void 0===n?0:n)}),0);return this.$vuetify.lang.t(this.counterSizeString,e,Object(z.p)(t,1024===this.base))},internalArrayValue:function(){return Object(z.x)(this.internalValue)},internalValue:{get:function(){return this.lazyValue},set:function(e){this.lazyValue=e,this.$emit("change",this.lazyValue)}},isDirty:function(){return this.internalArrayValue.length>0},isLabelActive:function(){return this.isDirty},isMultiple:function(){return this.$attrs.hasOwnProperty("multiple")},text:function(){var e=this;return this.isDirty?this.internalArrayValue.map((function(t){var n=t.name,r=void 0===n?"":n,o=t.size,c=void 0===o?0:o,l=e.truncateText(r);return e.showSize?"".concat(l," (").concat(Object(z.p)(c,1024===e.base),")"):l})):[this.placeholder]},base:function(){return"boolean"!=typeof this.showSize?this.showSize:void 0},hasChips:function(){return this.chips||this.smallChips}},watch:{readonly:{handler:function(e){!0===e&&Object(N.b)("readonly is not supported on <v-file-input>",this)},immediate:!0},value:function(e){var t=this.isMultiple?e:e?[e]:[];Object(z.h)(t,this.$refs.input.files)||(this.$refs.input.value="")}},methods:{clearableCallback:function(){this.internalValue=this.isMultiple?[]:void 0,this.$refs.input.value=""},genChips:function(){var e=this;return this.isDirty?this.text.map((function(text,t){return e.$createElement($.a,{props:{small:e.smallChips},on:{"click:close":function(){var n=e.internalValue;n.splice(t,1),e.internalValue=n}}},[text])})):[]},genInput:function(){var input=D.options.methods.genInput.call(this);return delete input.data.domProps.value,delete input.data.on.input,input.data.on.change=this.onInput,[this.genSelections(),input]},genPrependSlot:function(){var e=this;if(!this.prependIcon)return null;var t=this.genIcon("prepend",(function(){e.$refs.input.click()}));return this.genSlot("prepend","outer",[t])},genSelectionText:function(){var e=this.text.length;return e<2?this.text:this.showSize&&!this.counter?[this.computedCounterValue]:[this.$vuetify.lang.t(this.counterString,e)]},genSelections:function(){var e=this,t=[];return this.isDirty&&this.$scopedSlots.selection?this.internalArrayValue.forEach((function(n,r){e.$scopedSlots.selection&&t.push(e.$scopedSlots.selection({text:e.text[r],file:n,index:r}))})):t.push(this.hasChips&&this.isDirty?this.genChips():this.genSelectionText()),this.$createElement("div",{staticClass:"v-file-input__text",class:{"v-file-input__text--placeholder":this.placeholder&&!this.isDirty,"v-file-input__text--chips":this.hasChips&&!this.$scopedSlots.selection}},t)},genTextFieldSlot:function(){var e=this,t=D.options.methods.genTextFieldSlot.call(this);return t.data.on=R(R({},t.data.on||{}),{},{click:function(){return e.$refs.input.click()}}),t},onInput:function(e){var t=Object(j.a)(e.target.files||[]);this.internalValue=this.isMultiple?t:t[0],this.initialValue=this.internalValue},onKeyDown:function(e){this.$emit("keydown",e)},truncateText:function(e){if(e.length<Number(this.truncateLength))return e;var t=Math.floor((Number(this.truncateLength)-1)/2);return"".concat(e.slice(0,t),"â€¦").concat(e.slice(e.length-t))}}}),E=n(386),P=n(387),component=Object(x.a)(w,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ma-0 pa-0"},[n("v-form",{ref:"createTopicForm",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-text-field",{attrs:{label:"Topic Name",counter:20,rules:e.topicNameRules,required:""},model:{value:e.topicName,callback:function(t){e.topicName=t},expression:"topicName"}}),e._v(" "),n("v-textarea",{attrs:{placeholder:"Topic Description",rows:"6",hint:"Describe the topic in brief.",rules:e.topicDescriptionRules,required:""},model:{value:e.topicDescription,callback:function(t){e.topicDescription=t},expression:"topicDescription"}}),e._v(" "),n("client-only",[n("v-file-input",{staticClass:"mb-2",attrs:{accept:"image/*",placeholder:"Topic Thumbnail",hint:"This will be displayed as the topic logo.",rules:e.topicThumbnailRules,counter:1,"show-size":1e3,required:""},model:{value:e.topicThumbnail,callback:function(t){e.topicThumbnail=t},expression:"topicThumbnail"}})],1),e._v(" "),n("div",{staticClass:"ma-0 pa-0 d-flex flex-row justify-end align-center"},[n("v-btn",{staticClass:"mt-8 mr-2",attrs:{text:""},on:{click:function(t){return e.clearAllFields()}}},[e._v("\n        Clear\n      ")]),e._v(" "),n("v-btn",{staticClass:"mt-8",attrs:{color:"primary",disabled:!e.valid},on:{click:function(t){return e.createTopic()}}},[e._v("\n        Create\n      ")])],1)],1)],1)}),[],!1,null,"2b76a3bc",null);t.default=component.exports;S()(component,{VBtn:O.a,VFileInput:_,VForm:E.a,VTextField:C.a,VTextarea:P.a})}}]);